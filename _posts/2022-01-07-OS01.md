---
title: 计算机系统学习
tags: 深入理解计算机系统
mathjax: true
mode: immersive
comment: true
pageview: true
key: A0003
header:
  theme: dark
article_header:
  type: cover
  image:
    src: /City.jpg

---

* content
  {:toc}

# 深入理解计算机系统

> 计算机系统是由硬件和系统软件自称，他们共同工作来运行应用程序。所有计算机系统都有相似的硬件和软件组件，也执行着相似的功能。

## 一个程序的生命周期：

程序的生命周期可以看作：从程序员创建了这个程序->程序在操作系统上运行->输出运行结果->程序的中止，到此刻，一个程序的生命周期也就完结了。

## 信息：

一个源程序实际上是由0和1组成的位（比特）序列，八个位为一组，被称为字节，每个字节组成程序的某个文本字符。程序以字节序列存储在文件中。像.c文件这样的只由ASCII字符组成的文件称之为文本文件，其他所有文件都称之为二进制文件。**系统的所有信息（磁盘文件、内存中的程序、内存中存放的用户数据以及网络上传送的数据）都是由一串比特表示的**，区分不同数据对象的**唯一方法是我们读到这些数据对象时的上下文**。比如在不同的上下文中，同样的字节可能表示一个证书、浮点数、字符串或者机器指令。

## 程序的翻译（编译）：

在系统上运行.c程序需要将每条c语句转化为一系列的**低级机器语言指令**，然后这些指令按照一种称为**可执行目标程序**的格式打包，并以**二进制磁盘文件**存放起来。目标程序也被称为**可执行目标文件**。

比如：Unix系统上源文件到目标文件的转化是由**编译器驱动程序**完成：

```
linux> gcc -o filename filename.c
```

GCC编译器驱动程序读取程序文件hello.c，并把它翻译成目标文件hello，翻译过程分四个阶段：

- 预处理阶段：**预处理器（cpp）**根据以#开头的命令（头文件），修改原始c程序（预处理器读取头文件内容并把它插入文本）得到另一个 c 程序，通常以 .i 为扩展名。
- 编译阶段：**编译器（ccl）**将.i文本文件翻译成 .s文件，它包含一个汇编语言程序，该程序包含 main 函数的定义。
- 汇编阶段：**汇编器（as）**将.s文件翻译成机器语言指令，把这些指令打包成一种叫做可重定位目标程序的格式，并保存在二进制文件.o文件中。
- 链接阶段：程序调用程序中的函数，比如printf函数，它是C编译器提供的一个标准库函数，printf 函数存在一个名为 printf.o 的单独预编译好的目标文件，**链接器（ld）**负责将这个文件以某种方式合并到.o 程序中，得到 hello 文件，它是一个**可执行目标文件**，可以被加载到内存中，由系统执行。
- 此时.c程序就被编译系统翻译为二进制可执行文件，并存放在磁盘上，要在Unix系统上运行该文件，可以把它的文件名输入到名为 shell 的应用程序中：
  
  ```
  linux> ./filename
  ```

shell 是一个**命令行解释器**，它输入一个提示符，等待输入一个**命令行**，然后执行这个命令，如果这个命令行的第一个单词不是一个内置的shell命令，那么shell就会假设这是一个可执行文件的名字，加载并运行此文件。shell 加载并运行filename文件，等待程序终止后shell 输出下一个提示符等待下一个输入的命令行。


